# Timer

## 호출 스케줄링 Scheduling a call

- 함수를 호출하면 함수가 _즉시_ 실행된다
- 이 _즉시_ 를 바꾸려면 타이머 함수를 사용
- 호출을 예약(timer 함수를 사용해서) 하는 걸 호출 스케줄링 이라고 한다
- 타이머는 빌트인 함수가 아니라 브라우저 또는 NodeJS에서 제공하는 호스트 오브젝트이다(ECMA 사양에 정의되어있지 않다)
- 자바스크립트 엔진은 하나의 실행 스택(실행을 담당하는 영역)이라서 두가지 이상의 테스크를 동시에 실행할 수 없다
- 타이머 함수는 비동기 Async 처리 방식으로 동작
  (나중에 알아보자 - 아직 잘 모르겠다)
- 실행 스택에 들어온 순서대로 하면 동기식이고, 그거대로 안하고 타이머나 비동기 명령(async)을 따르면 비동기(내가 이해한 바)

### setTimeout / clearTimeout

- 첫번째는 실행할 콜백함수
- 두번쨰는 1000분에 1초(밀리초) 만료시간
- 세번째 이후는 콜백함수에 전달할 인자들
- 리턴값이 있어서 timerId를 리턴한다
  - 브라우저는 숫자, Node 환경이면 오브젝트
- 이 리턴값을 clearTimeout의 인자로 전해주면 타이머 취소 가능

### setInterval / clearInterval

- 타임아웃하고 거의 같은데 이거는 두번째 인자의 주기대로 반복한다

## 디바운스와 스로틀

- 짧은 연속적으로 발생하는 이벤트
  - scroll / resize / input / mouseMove 등
- 때문에 발생하는 과도한 호출을 방지하는 기법

### 디바운스

- 연속 이벤트를 생략(그룹화)해서 될만할때 한번씩만 이벤트 호출하는 방법
- 핸들러 작동으로 생기는 주기나 성능 처리보다 짧은 주기로 부르는 것은 주기 마지막에만 취소했다가 타이머 행동을 다시 실행하는 방법
- 자동완성, 중복 클릭방지, ajax 요청, resize 이벤트에 쓰인다
- 직접 만들 수도 있지만 Underscore debounce 함수 또는 Lodash의 debounce 함수를 사용을 권장
- 로대시 많이 쓰는거 같던데 [https://lodash.com/](https://lodash.com/) 알아볼 필요도 있지 않을까

### 스로틀

- 일정시간 간격으로 이벤트가 발생하는 걸 묶어서 한번씩만 호출되도록 호출 주기를 만드는 방법
- 스크롤 이벤트 같은 경우
- 일경 시간 경과 했을떄 새로 타이머 설정하여 콜백 호출
- 스크롤 이벤트, 무한 스크롤에서 사용
- 이것도 언더스코어나 로대시 throuttle을 권장
