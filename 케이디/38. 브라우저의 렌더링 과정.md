# 38 브라우저의 렌더링 과정

### 브라우저의 렌더링 과정
    자바스크립트가 가장 많이 사용되는 분야는 웹 브라우저 환경에서 동작하는 
    웹페이지/애플리케이션의 클라이언트 사이드다.

    * 파싱: 프로그래밍 언어의 문법에 맞게 작성된 텍스트 문서를 읽어 들여 실행하기 위해
            토큰 분해 -> 문법적 의미, 구조 반영 -> 트리구조의 자료구조인 파스트리를 생성하는
            일련의 과정
    * 렌더링: HTML, CSS, 자바스크립트로 작성된 문서를 파싱하여 브라우저에 시각적으로 출력하는 것.
    * DOM: HTML 문서를 파싱한 결과물.
    
    *렌더링 과정
        1. 렌더링에 필요한 리소스를 요청하고 서버로부터 응답을 받는다.
        2. 서버에서 응답된 HTML, CSS를 파싱하여 DOM, CSSOM을 생성하고 이들을 결합하여 렌더 트리를 생성한다.
        3. 서버에서 응답된 자바스크립트를 파싱하여 AST(추상적 구문 트리)를 생성하고 바이트 코드로 
            변환하여 실행한다. 
        4. 렌더 트리를 기반으로 HTML 요소의 레이아웃(위치, 크기)을 계산하고 브라우저 화면에
            HTML 요소를 페인팅한다.

### 자바스크립트 파싱에 의한 HTML 파싱 중단
    브라우저는 동기적으로, 즉 위에서 아래 방향으로 순차적으로 HTML, CSS, 자바스크립트를 파싱하고 실행한다.
    이것은 script 태그의 위치에 따라 HTML 파싱이 블로킹되어 DOM 생성이 지연될 수 있다는 것.
    => body 요소의 가장 아래에 자바스크립트를 위치시키는 것은 좋은 아이디어!

### script 태그의 async/defer 어트리뷰트
    위 문제를 근복적으로 해결하기 위해 추가됨
    src 어트리뷰트를 통해 외부 자바스크립트 파일을 로드하는 경우에만 사용할 수 있다.
    인라인 자바스크립트에서 사용 불가
    * async 어트리뷰트
        script태그의 순서와는 상관없이 로드가 완료된 자바스크립트부터 먼저 실행되므로 
        순서가 보장되지 않는다.
    * defer 어트리뷰트
        자바스크립트의 파싱과 실행이 HTML 파싱이 완료된 직후, 즉 DOM 생성이 완료된 직후
        진행된다. 따라서 DOM 생성이 완료된 이후 실행되어야 할 자바스크립트에 유용하다.
